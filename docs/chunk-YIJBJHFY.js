import{a as H}from"./chunk-J5MIID7Z.js";import{a as B}from"./chunk-NLSD4QPJ.js";import{$a as V,A as C,G as b,H as P,I as y,J as O,K as w,L as g,M as o,N as c,O as x,S,T,V as d,Wa as j,aa as m,ba as f,ca as L,ea as I,ha as z,ia as D,k as u,m as M,n as v,u as k,ua as F,v as _,va as E,w as l}from"./chunk-PI3BIOHL.js";import{h}from"./chunk-YDOXD4O3.js";function N(n,r){if(n&1){let s=S();o(0,"div",7)(1,"div",8),m(2),c(),o(3,"div",9),m(4),c(),o(5,"div",10),T("click",function(){M(s);let t=d().$implicit,e=d();return v(e.addIng(e.recipie["strMeasure"+t.key.split("strIngredient")[1]],e.recipie[t.key]))}),m(6," + "),c()()}if(n&2){let s=d().$implicit,i=d();l(2),f(i.recipie[s.key]),l(2),L(" ",i.recipie["strMeasure"+s.key.split("strIngredient")[1]]," ")}}function R(n,r){if(n&1&&b(0,N,7,2,"div",7),n&2){let s=r.$implicit,i=d();P(i.recipie&&s.key.includes("strIngredient")&&i.recipie[s.key]!=""?0:-1)}}var Q=(()=>{let r=class r{get ingsLen(){if(!this.recipie)return 0;let i=Object.keys(this.recipie).filter(e=>e.startsWith("strIngredient")),t=0;for(let e of i)this.recipie[e]&&t++;return t}constructor(){this.dataSrv=u(H),this.dataStore=u(B),this.loginName=this.dataSrv.getLoginName(),this.recipie=this.dataStore.selectedMeal(),this.id=0}addIng(i,t){return h(this,null,function*(){let e=this.dataSrv.listId(),a=e.find(p=>p.name=="shopping list");this.dataStore.favoriteMealList().find(p=>p.name==this.recipie.strMeal)||this.dataSrv.updateFavoriteMeal(this.recipie.strMeal),a?(this.dataSrv.setSelectedListId(a.id),this.createTaskModel(i,t)&&this.dataSrv.updateTaskList(this.createTaskModel(i,t))):(this.dataSrv.updateListId("shopping list"),e=this.dataSrv.listId(),a=e.find(p=>p.name=="shopping list"),a&&(this.dataSrv.setSelectedListId(a.id),this.createTaskModel(i,t)&&this.dataSrv.updateTaskList(this.createTaskModel(i,t))))})}createTaskModel(i,t){if(i&&t){let e=this.dataSrv.taskList().find(a=>a.task.toLowerCase()==t.toLowerCase());return e?(e.taskinfo=e.taskinfo+","+this.recipie.strMeal+" - "+i,this.dataSrv.updateTaskData(e),null):{listID:0,id:0,task:t||"",taskinfo:this.recipie.strMeal+" - "+i,author:this.loginName,date:new Date().getDate().toString(),status:"false",currentStatus:1,editMode:!1,seeInfo:!1,color:Math.floor(Math.random()*16777215).toString(16),isCheckBox:!0,didIt:!1}}return alert("Something went wrong, ingredient not added: "+i+", "+t),null}ngOnInit(){this.recipie||location.replace("/recepies-book")}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=C({type:r,selectors:[["app-recepie-item"]],decls:11,vars:7,consts:[[3,"fullscreen"],[1,"meal-deatails"],["alt","meak-pic",3,"src"],[1,"title"],[1,"meal-cook-wrapper"],[1,"meal-instructors",3,"innerHTML"],[1,"ingredients"],[1,"ingredien-info"],[1,"name"],[1,"amont"],[1,"ingredien-add",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-content",0)(1,"section",1),x(2,"img",2),o(3,"div",3),m(4),c(),o(5,"div",4),x(6,"div",5),o(7,"ul",6),O(8,R,1,1,null,null,y),z(10,"keyvalue"),c()()()()),t&2&&(g("fullscreen",!0),l(2),g("src",I(e.recipie==null?null:e.recipie.strMealThumb),_),l(2),f(e.recipie==null?null:e.recipie.strMeal),l(2),g("innerHTML",e.recipie==null?null:e.recipie.strInstructions,k),l(2),w(D(10,5,e.recipie)))},dependencies:[V,E,j,F],styles:[".meal-deatails[_ngcontent-%COMP%]{margin:0 auto;position:relative}.meal-deatails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-bottom-right-radius:30px;border-bottom-left-radius:30px;box-shadow:0 10px 30px #00000080}.meal-deatails[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:sticky;top:45px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.5rem;padding:15px 30px;min-height:60px;height:fit-content;margin:-30px auto 20px;width:90%;z-index:2;background:var(--glass-bg);-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);border:1px solid var(--glass-border);border-radius:20px;color:var(--ion-color-secondary);text-align:center;box-shadow:0 10px 25px #00000080;text-shadow:0 0 10px var(--c-secondary-glow);font-weight:700}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding-bottom:40px}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]{background:var(--c-surface);margin:0 20px;border-radius:20px;padding:10px;border:1px solid rgba(255,255,255,.05)}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-info[_ngcontent-%COMP%]{padding:15px 45px 15px 15px;border-bottom:1px solid rgba(255,255,255,.1);color:var(--ion-text-color);font-size:1rem;position:relative}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-info[_ngcontent-%COMP%]:last-child{border-bottom:none}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-add[_ngcontent-%COMP%]{cursor:pointer;font-size:1.2rem;position:absolute;display:flex;justify-content:center;align-items:center;transform:translateY(-50%);top:50%;right:10px;border-radius:50%;background-color:var(--ion-color-secondary);color:#000;height:30px;width:30px;transition:.3s}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-add[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary);color:#fff;box-shadow:0 0 10px var(--c-primary-glow)}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .meal-instructors[_ngcontent-%COMP%]{width:90%;margin:0 auto;line-height:1.6;color:var(--c-silver);font-size:1rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:20px;border-radius:20px;border:1px solid var(--glass-border)}"]});let n=r;return n})();export{Q as a};
