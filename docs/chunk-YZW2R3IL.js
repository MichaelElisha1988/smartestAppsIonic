import{a as H}from"./chunk-T5W5RHTD.js";import{a as V}from"./chunk-PD3QT3NN.js";import{A as b,H as w,I as y,J as P,K as S,L as O,M as u,N as s,O as c,P as f,T,V as L,X as p,ca as m,da as x,ea as I,fb as j,ga as D,k as h,ka as z,kb as N,la as F,m as M,n as k,u as _,v as C,w as d,ya as B,za as E}from"./chunk-KH6YNDB3.js";import{h as v}from"./chunk-YDOXD4O3.js";function $(a,o){if(a&1){let l=T();s(0,"div",7)(1,"div",8),m(2),c(),s(3,"div",9),m(4),c(),s(5,"div",10),L("click",function(){M(l);let t=p().$implicit,e=p();return k(e.addIng(e.recipie["strMeasure"+t.key.split("strIngredient")[1]],e.recipie[t.key]))}),m(6," + "),c()()}if(a&2){let l=p().$implicit,i=p();d(2),x(i.recipie[l.key]),d(2),I(" ",i.recipie["strMeasure"+l.key.split("strIngredient")[1]]," ")}}function K(a,o){if(a&1&&w(0,$,7,2,"div",7),a&2){let l=o.$implicit,i=p();y(i.recipie&&l.key.includes("strIngredient")&&i.recipie[l.key]!=""?0:-1)}}var Z=(()=>{let o=class o{get ingsLen(){if(!this.recipie)return 0;let i=Object.keys(this.recipie).filter(e=>e.startsWith("strIngredient")),t=0;for(let e of i)this.recipie[e]&&t++;return t}constructor(){this.dataSrv=h(H),this.dataStore=h(V),this.loginName=this.dataSrv.getLoginName(),this.recipie=this.dataStore.selectedMeal(),this.id=0}addIng(i,t){return v(this,null,function*(){let e=this.dataSrv.listId(),n=e.find(r=>r.name=="shopping list");this.dataStore.favoriteMealList().find(r=>r.name==this.recipie.strMeal)||this.dataSrv.updateFavoriteMeal(this.recipie.strMeal),n?(this.dataSrv.setSelectedListId(n.id),this.createTaskModel(i,t,n.id)&&this.dataSrv.updateTaskList(this.createTaskModel(i,t,n.id))):(this.dataSrv.updateListId("shopping list"),e=this.dataSrv.listId(),n=e.find(r=>r.name=="shopping list"),n&&(this.dataSrv.setSelectedListId(n.id),this.createTaskModel(i,t,n.id)&&this.dataSrv.updateTaskList(this.createTaskModel(i,t,n.id))))})}createTaskModel(i,t,e){if(i&&t){let n=this.dataSrv.taskList().find(r=>r.task.toLowerCase()==t.toLowerCase()&&r.listID==e);if(n)return n.taskinfo=n.taskinfo+","+this.recipie.strMeal+" - "+i,this.dataSrv.updateTaskData(n),null;{let r=this.dataSrv.listId().find(R=>R.id===e),g={listID:e,id:new Date().valueOf(),task:t||"",taskinfo:this.recipie.strMeal+" - "+i,author:this.loginName,date:new Date().getDate().toString(),status:"false",currentStatus:1,editMode:!1,seeInfo:!1,color:Math.floor(Math.random()*16777215).toString(16),isCheckBox:!0,didIt:!1};return r?.isShared&&(g.isShared=!0,g.sharedBy=r.sharedBy,g.ownerListName=r.name),g}}return alert("Something went wrong, ingredient not added: "+i+", "+t),null}ngOnInit(){this.recipie||location.replace("/recepies-book")}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=b({type:o,selectors:[["app-recepie-item"]],decls:11,vars:7,consts:[[3,"fullscreen"],[1,"meal-deatails"],["alt","meak-pic",3,"src"],[1,"title"],[1,"meal-cook-wrapper"],[1,"meal-instructors",3,"innerHTML"],[1,"ingredients"],[1,"ingredien-info"],[1,"name"],[1,"amont"],[1,"ingredien-add",3,"click"]],template:function(t,e){t&1&&(s(0,"ion-content",0)(1,"section",1),f(2,"img",2),s(3,"div",3),m(4),c(),s(5,"div",4),f(6,"div",5),s(7,"ul",6),S(8,K,1,1,null,null,P),z(10,"keyvalue"),c()()()()),t&2&&(u("fullscreen",!0),d(2),u("src",D(e.recipie==null?null:e.recipie.strMealThumb),C),d(2),x(e.recipie==null?null:e.recipie.strMeal),d(2),u("innerHTML",e.recipie==null?null:e.recipie.strInstructions,_),d(2),O(F(10,5,e.recipie)))},dependencies:[N,E,j,B],styles:[".meal-deatails[_ngcontent-%COMP%]{margin:0 auto;position:relative}.meal-deatails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-bottom-right-radius:30px;border-bottom-left-radius:30px;box-shadow:0 10px 30px #00000080}.meal-deatails[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:sticky;top:45px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.5rem;padding:15px 30px;min-height:60px;height:fit-content;margin:-30px auto 20px;width:90%;z-index:2;background:var(--glass-bg);-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);border:1px solid var(--glass-border);border-radius:20px;color:var(--ion-color-secondary);text-align:center;box-shadow:0 10px 25px #00000080;text-shadow:0 0 10px var(--c-secondary-glow);font-weight:700}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding-bottom:40px}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]{background:var(--c-surface);margin:0 20px;border-radius:20px;padding:10px;border:1px solid rgba(255,255,255,.05)}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-info[_ngcontent-%COMP%]{padding:15px 45px 15px 15px;border-bottom:1px solid rgba(255,255,255,.1);color:var(--ion-text-color);font-size:1rem;position:relative}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-info[_ngcontent-%COMP%]:last-child{border-bottom:none}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-add[_ngcontent-%COMP%]{cursor:pointer;font-size:1.2rem;position:absolute;display:flex;justify-content:center;align-items:center;transform:translateY(-50%);top:50%;right:10px;border-radius:50%;background-color:var(--ion-color-secondary);color:#000;height:30px;width:30px;transition:.3s}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-add[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary);color:#fff;box-shadow:0 0 10px var(--c-primary-glow)}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .meal-instructors[_ngcontent-%COMP%]{width:90%;margin:0 auto;line-height:1.6;color:var(--c-silver);font-size:1rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:20px;border-radius:20px;border:1px solid var(--glass-border)}"]});let a=o;return a})();export{Z as a};
