import{a as B}from"./chunk-6N4I7QFO.js";import{a as V}from"./chunk-ITYPM3HJ.js";import{B as k,H as C,I as S,J as y,K as P,L as O,M as u,N as a,O as c,P as h,T as w,V as L,X as p,Ya as E,bb as j,ca as m,da as f,ea as T,ga as I,ja as b,ka as D,l as g,n as v,o as M,v as x,w as _,wa as z,x as l,xa as F}from"./chunk-WTE77RXS.js";function H(n,r){if(n&1){let o=w();a(0,"div",7)(1,"div",8),m(2),c(),a(3,"div",9),m(4),c(),a(5,"div",10),L("click",function(){v(o);let t=p().$implicit,e=p();return M(e.addIng(e.recipie["strMeasure"+t.key.split("strIngredient")[1]],e.recipie[t.key]))}),m(6," + "),c()()}if(n&2){let o=p().$implicit,i=p();l(2),f(i.recipie[o.key]),l(2),T(" ",i.recipie["strMeasure"+o.key.split("strIngredient")[1]]," ")}}function N(n,r){if(n&1&&C(0,H,7,2,"div",7),n&2){let o=r.$implicit,i=p();S(i.recipie&&o.key.includes("strIngredient")&&i.recipie[o.key]!=""?0:-1)}}var J=(()=>{let r=class r{get ingsLen(){if(!this.recipie)return 0;let i=Object.keys(this.recipie).filter(e=>e.startsWith("strIngredient")),t=0;for(let e of i)this.recipie[e]&&t++;return t}constructor(){this.dataSrv=g(B),this.dataStore=g(V),this.loginName=this.dataSrv.getLoginName(),this.recipie=this.dataStore.selectedMeal(),this.id=0}addIng(i,t){let e=this.dataSrv.getListId(),s=e.find(d=>d.name=="shopping list");this.dataStore.favoriteMealList().find(d=>d.name==this.recipie.strMeal)||this.dataSrv.updateFavoriteMeal(this.recipie.strMeal),s?(this.dataSrv.setSelectedListId(s.id),this.createTaskModel(i,t)&&this.dataSrv.updateTaskList(this.createTaskModel(i,t))):(this.dataSrv.updateListId("shopping list"),e=this.dataSrv.getListId(),s=e.find(d=>d.name=="shopping list"),this.dataSrv.setSelectedListId(s.id),this.createTaskModel(i,t)&&this.dataSrv.updateTaskList(this.createTaskModel(i,t)))}createTaskModel(i,t){if(i&&t){let e=this.dataSrv.taskList.find(s=>s.task.toLowerCase()==t.toLowerCase());return e?(e.taskinfo=e.taskinfo+","+this.recipie.strMeal+" - "+i,this.dataSrv.updateTaskData(e),null):{listID:0,id:0,task:t||"",taskinfo:this.recipie.strMeal+" - "+i,author:this.loginName,date:new Date().getDate().toString(),status:"false",currentStatus:1,editMode:!1,seeInfo:!1,color:Math.floor(Math.random()*16777215).toString(16),isCheckBox:!0,didIt:!1}}return alert("Something went wrong, ingredient not added: "+i+", "+t),null}ngOnInit(){this.recipie||location.replace("/recepies-book")}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=k({type:r,selectors:[["app-recepie-item"]],decls:11,vars:7,consts:[[3,"fullscreen"],[1,"meal-deatails"],["alt","meak-pic",3,"src"],[1,"title"],[1,"meal-cook-wrapper"],[1,"meal-instructors",3,"innerHTML"],[1,"ingredients"],[1,"ingredien-info"],[1,"name"],[1,"amont"],[1,"ingredien-add",3,"click"]],template:function(t,e){t&1&&(a(0,"ion-content",0)(1,"section",1),h(2,"img",2),a(3,"div",3),m(4),c(),a(5,"div",4),h(6,"div",5),a(7,"ul",6),P(8,N,1,1,null,null,y),b(10,"keyvalue"),c()()()()),t&2&&(u("fullscreen",!0),l(2),u("src",I(e.recipie==null?null:e.recipie.strMealThumb),_),l(2),f(e.recipie==null?null:e.recipie.strMeal),l(2),u("innerHTML",e.recipie==null?null:e.recipie.strInstructions,x),l(2),O(D(10,5,e.recipie)))},dependencies:[j,F,E,z],styles:[".meal-deatails[_ngcontent-%COMP%]{margin:0 auto}.meal-deatails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.meal-deatails[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:sticky;top:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:26px;padding:0 30px;min-height:60px;height:fit-content;margin-top:-20px;z-index:2;background-color:var(--c-grey);color:var(--c-blue);text-align:center}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:3.5fr 2fr}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-info[_ngcontent-%COMP%]{padding:15px 45px 15px 15px;border-bottom:2px solid var(--c-blue);color:var(--c-grey);font-size:14px;position:relative}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   .ingredien-add[_ngcontent-%COMP%]{cursor:pointer;font-size:22px;position:absolute;display:flex;justify-content:center;align-items:center;transform:translateY(-50%);top:50%;right:10px;border-radius:50%;background-color:var(--c-blue);height:30px;width:30px}.meal-deatails[_ngcontent-%COMP%]   .meal-cook-wrapper[_ngcontent-%COMP%]   .meal-instructors[_ngcontent-%COMP%]{width:90%;margin:13px auto;line-height:24px}"]});let n=r;return n})();export{J as a};
